<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>《docker快速上手》 实用版 | 李吉磊 Blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.8f3dca9f.css" as="style"><link rel="preload" href="/assets/js/app.5fb9499f.js" as="script"><link rel="preload" href="/assets/js/2.9b59b4ff.js" as="script"><link rel="preload" href="/assets/js/1.96620eb7.js" as="script"><link rel="preload" href="/assets/js/12.431e0208.js" as="script"><link rel="prefetch" href="/assets/js/10.619c73b1.js"><link rel="prefetch" href="/assets/js/11.4fe3d8ed.js"><link rel="prefetch" href="/assets/js/13.bbe468eb.js"><link rel="prefetch" href="/assets/js/14.12dedade.js"><link rel="prefetch" href="/assets/js/15.ce4589f9.js"><link rel="prefetch" href="/assets/js/16.f10ed1ca.js"><link rel="prefetch" href="/assets/js/17.9003e5f4.js"><link rel="prefetch" href="/assets/js/18.6a5c6852.js"><link rel="prefetch" href="/assets/js/19.4b690de6.js"><link rel="prefetch" href="/assets/js/20.3bada28f.js"><link rel="prefetch" href="/assets/js/21.21d2fb09.js"><link rel="prefetch" href="/assets/js/22.faf845ed.js"><link rel="prefetch" href="/assets/js/23.b8ebfab3.js"><link rel="prefetch" href="/assets/js/24.b27a1f24.js"><link rel="prefetch" href="/assets/js/25.24f97634.js"><link rel="prefetch" href="/assets/js/26.e2c8f48f.js"><link rel="prefetch" href="/assets/js/27.9f133172.js"><link rel="prefetch" href="/assets/js/28.75ed8791.js"><link rel="prefetch" href="/assets/js/29.66073005.js"><link rel="prefetch" href="/assets/js/3.c5ac82c9.js"><link rel="prefetch" href="/assets/js/30.a2505f42.js"><link rel="prefetch" href="/assets/js/4.2252019f.js"><link rel="prefetch" href="/assets/js/5.9c2dcfae.js"><link rel="prefetch" href="/assets/js/6.e16cc827.js"><link rel="prefetch" href="/assets/js/7.d07accda.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.58186997.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f3dca9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">李吉磊 Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/lijileiGood/lijileiGood.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/lijileiGood/lijileiGood.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>《docker快速上手》 实用版</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docker/#概述" class="sidebar-link">概述</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docker/#安装" class="sidebar-link">安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker/#启动" class="sidebar-link">启动</a></li></ul></li><li><a href="/docker/#镜像命令" class="sidebar-link">镜像命令</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docker/#容器命令" class="sidebar-link">容器命令</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docker/#停止、启动、重启、删除已有容器" class="sidebar-link">停止、启动、重启、删除已有容器</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docker/#其他命令" class="sidebar-link">其他命令</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docker/#部署各种软件-请张嘴" class="sidebar-link">部署各种软件(请张嘴)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docker/#部署nginx" class="sidebar-link">部署Nginx</a></li><li class="sidebar-sub-header"><a href="/docker/#安装mysql" class="sidebar-link">安装mysql</a></li><li class="sidebar-sub-header"><a href="/docker/#安装rabbitmq" class="sidebar-link">安装rabbitmq</a></li><li class="sidebar-sub-header"><a href="/docker/#安装redis" class="sidebar-link">安装redis</a></li><li class="sidebar-sub-header"><a href="/docker/#安装kibanna" class="sidebar-link">安装kibanna</a></li><li class="sidebar-sub-header"><a href="/docker/#sudo-权限" class="sidebar-link">sudo 权限</a></li></ul></li><li><a href="/docker/#卸载docker-清空间" class="sidebar-link">卸载docker/清空间</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <p><strong>为什么会出现</strong></p> <p>一款产品，开发和上线两套环境，环境配置费时费力，而且容易出问题</p> <p>发布项目时，不只是一套代码过去，而是代码+环境整体打包过去</p> <p>开发即运维，保证系统稳定性，提高部署效率</p> <p>思想来自于集装箱，对环境进行隔离</p> <p><strong>基本组成</strong></p> <ul><li><p>镜像(image)：镜像好比一个模板，可以通过这个模板来创建容器，一个镜像可以创建多个容器；<strong>类似java一个类可以创建无数个对象</strong></p></li> <li><p>容器(container)：容器可以理解为一个简易的系统</p></li> <li><p>仓库(repository)：存放镜像的地方,分为共有仓库和私有仓库</p> <p><code>应用 -&gt; 环境（容器） -&gt; 内核</code></p> <p><img src="/assets/img/image-20220526103515965.bfc33830.png" alt="image-20220526103515965"></p></li></ul> <p><strong>怎么工作的？</strong></p> <p>Docker是一个Client &lt;—&gt; Server结构的系统，Docker的守护进程在主机上，客户端通过Socket访问</p> <p><img src="/assets/img/image-20200616162107363.9643aa04.png" alt="image-20200616162107363"></p> <p>Docker为什么比VM快？</p> <ul><li><p>Docker比虚拟机更少的抽象层</p></li> <li><p>新建一个容器时docker用的是宿主机的内核，docker不需要像虚拟机一样重新加载一个操作系统内核</p></li></ul> <p><img src="/assets/img/image-20220526110310834.6e96254c.png" alt="image-20220526110310834"></p> <table><thead><tr><th></th> <th>传统虚拟机</th> <th>Docker</th></tr></thead> <tbody><tr><td>虚拟内容</td> <td>硬件+完整的操作系统+软件</td> <td>APP+LIB</td></tr> <tr><td>大小</td> <td>笨重，通常几个G</td> <td>轻便几个M或KB</td></tr> <tr><td>启动速度</td> <td>慢，分钟级</td> <td>快，秒</td></tr></tbody></table> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>ubuntu为例, 我只写的国内源, 让你没有出错的可能</p> <p><a href="https://yeasy.gitbook.io/docker_practice/install/ubuntu" target="_blank" rel="noopener noreferrer">官方安装文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>卸载旧版本</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> remove <span class="token function">docker</span> <span class="token punctuation">\</span>
               docker-engine <span class="token punctuation">\</span>
               docker.io
</code></pre></div><p><strong>使用APT安装</strong></p> <p>由于 <code>apt</code> 源使用 HTTPS 以确保软件下载过程中不被篡改。因此，我们首先需要添加使用 HTTPS 传输的软件包以及 CA 证书</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> <span class="token function">apt-get</span> update

$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token punctuation">\</span>
    apt-transport-https <span class="token punctuation">\</span>
    ca-certificates <span class="token punctuation">\</span>
    <span class="token function">curl</span> <span class="token punctuation">\</span>
    gnupg <span class="token punctuation">\</span>
    lsb-release
</code></pre></div><p><strong>设置镜像的仓库</strong></p> <p>用国内镜像，百度搜索，docker的阿里云镜像地址</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 这是阿里云的源，不要用官方源</span>
$ <span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> gpg <span class="token parameter variable">--dearmor</span> <span class="token parameter variable">-o</span> /usr/share/keyrings/docker-archive-keyring.gpg
</code></pre></div><p>向 <code>sources.list</code> 中添加 Docker 软件源</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 这是阿里云的源，不要用官方源</span>
$ <span class="token builtin class-name">echo</span> <span class="token punctuation">\</span>
  <span class="token string">&quot;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu \
  <span class="token variable"><span class="token variable">$(</span>lsb_release <span class="token parameter variable">-cs</span><span class="token variable">)</span></span> stable&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/docker.list <span class="token operator">&gt;</span> /dev/null
</code></pre></div><p><strong>安装docker引擎</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">apt-get</span> update

$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> docker-ce docker-ce-cli containerd.io
</code></pre></div><h3 id="启动"><a href="#启动" class="header-anchor">#</a> <strong>启动</strong></h3> <blockquote><p>自己备注：</p> <p>docker本身也是需要启动的</p> <p>执行：service docker start</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 启动</span>
<span class="token function">sudo</span> systemctl start <span class="token function">docker</span> 

<span class="token comment"># 设置开机自启动</span>
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
</code></pre></div><p><strong>建立 docker 用户组</strong></p> <p>默认情况下，<code>docker</code> 命令会使用 <a href="https://en.wikipedia.org/wiki/Unix_domain_socket" target="_blank" rel="noopener noreferrer">Unix socket<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 与 Docker 引擎通讯。而只有 <code>root</code> 用户和 <code>docker</code> 组的用户才可以访问 Docker 引擎的 Unix socket。出于安全考虑，一般 Linux 系统上不会直接使用 <code>root</code> 用户。因此，更好地做法是将需要使用 <code>docker</code> 的用户加入 <code>docker</code> 用户组。</p> <p>建</p> <p>将当前用户加入 <code>docker</code> 组：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">usermod</span> <span class="token parameter variable">-aG</span> <span class="token function">docker</span> <span class="token environment constant">$USER</span>
</code></pre></div><p>退出当前终端并重新登录，进行如下测试。</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker run --rm hello-world
</code></pre></div><p><img src="/assets/img/image-20200616151641013.9779733b.png" alt="image-20200616151641013"></p> <p><strong>配置阿里云镜像加速</strong></p> <p><img src="/assets/img/image-20220526102643460.38bda89f.png" alt="image-20220526102643460"></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /etc/docker <span class="token comment"># 创建一个陌路</span>
------------------------------------一次命令
<span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">'EOF'
{
  &quot;registry-mirrors&quot;: [&quot;https://uyfgafsw.mirror.aliyuncs.com&quot;]
}
EOF</span> <span class="token comment"># 编写配置文件</span>
-------------------------------------------一次命令
<span class="token function">sudo</span> systemctl daemon-reload <span class="token comment"># 重启服务</span>
<span class="token function">sudo</span> systemctl restart <span class="token function">docker</span> <span class="token comment"># 重启docker</span>
</code></pre></div><h2 id="镜像命令"><a href="#镜像命令" class="header-anchor">#</a> 镜像命令</h2> <p><strong>镜像搜索</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> search mysql
</code></pre></div><p><a href="http://hub.docker.com" target="_blank" rel="noopener noreferrer">网页版搜索地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/assets/img/image-20220526133555943.f643bd38.png" alt="image-20220526133555943"></p> <p><img src="/assets/img/image-20220526133607421.630436ec.png" alt="image-20220526133607421"></p> <p><img src="/assets/img/1648432196184.75bdb6ab.png" alt="1648432196184"></p> <p><strong>下载镜像</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 下载mysql镜像，默认最新版latest</span>
<span class="token function">docker</span> pull mysql 

<span class="token comment"># 下载指定版本</span>
<span class="token function">docker</span> pull mysql:8  
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@192 ~<span class="token punctuation">]</span><span class="token comment"># docker pull mysql</span>
Using default tag: latest <span class="token comment"># 默认最新版</span>
latest: Pulling from library/mysql
8559a31e96f4: Pull complete  <span class="token comment"># 分层下载</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
Digest: sha256:8b7b328a7ff6de46ef96bcf83af048cb00a1c86282bfca0cb119c84568b4caf6 <span class="token comment">#签名</span>
Status: Downloaded newer image <span class="token keyword">for</span> mysql:latest
docker.io/library/mysql:latest <span class="token comment"># 真实版本号</span>
</code></pre></div><p><strong>查看镜像列表</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@192 ~<span class="token punctuation">]</span><span class="token comment"># docker image ls</span>

REPOSITORY          <span class="token comment"># 镜像仓库源（镜像名字）</span>
TAG                 <span class="token comment"># 镜像的版本号</span>
IMAGE ID            <span class="token comment"># 镜像的id</span>
CREATED             <span class="token comment"># 创建时间</span>
SIZE                <span class="token comment"># 大小</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="Snipaste_2022-03-28_09-07-12"></p> <div class="language-bash extra-class"><pre class="language-bash"><code>root@aliyun:~ <span class="token comment"># docker images --help</span>
Usage:  <span class="token function">docker</span> images <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> <span class="token punctuation">[</span>REPOSITORY<span class="token punctuation">[</span>:TAG<span class="token punctuation">]</span><span class="token punctuation">]</span>
Options:
	<span class="token comment"># 显示所有(在有很多镜像的情况下，只会显示前几个)</span>
  -a, <span class="token parameter variable">--all</span>             Show all images <span class="token punctuation">(</span>default hides intermediate images<span class="token punctuation">)</span> 
  -q, <span class="token parameter variable">--quiet</span>           Only show image IDs      <span class="token comment"># 只显示id</span>
</code></pre></div><ul><li><p>加 -q 只显示id（可能也显示一部分）</p></li> <li><p>加-a -q 显示所有的镜像的id</p></li></ul> <p><img src="/assets/img/image-20220526111546558.483e56d9.png" alt="image-20220526111546558"></p> <p><strong>删除镜像</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 删除一个 可以通过名称，也可以指定id；删除的镜像不能有运行/停止的容器</span>
<span class="token function">docker</span> image <span class="token function">rm</span> 9cfid前3位即可/镜像名字也行
</code></pre></div><h2 id="容器命令"><a href="#容器命令" class="header-anchor">#</a> 容器命令</h2> <ul><li>有了镜像才能创建容器</li> <li>docker容器运行必须有一个前台进程， 如果没有前台进程执行，容器认为空闲，就会自行退出。这是规定。</li></ul> <p><strong>根据镜像启动、进入、退出容器</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 启动</span>
<span class="token function">docker</span> run <span class="token punctuation">[</span>可选参数<span class="token punctuation">]</span> 镜像名字

<span class="token comment"># 启动的时候必须指定这三个参数，否则会自己关闭!!! </span>
<span class="token function">docker</span> run <span class="token parameter variable">-i</span> <span class="token parameter variable">-t</span> <span class="token parameter variable">-d</span> centos 

<span class="token comment"># 同时指定多个端口号绑定语法:【p 空格 p空格】</span>
<span class="token function">docker</span> run <span class="token parameter variable">-tid</span> <span class="token parameter variable">-p</span> <span class="token number">3306</span>:80 <span class="token parameter variable">-p</span> <span class="token number">80</span>:81  nginx 

<span class="token comment"># 参数说明</span>
<span class="token parameter variable">-d</span> 后台方式运行
<span class="token parameter variable">-t</span> 选项让Docker分配一个伪终端（pseudo-tty）并绑定到容器的标准输入上， 
<span class="token parameter variable">-i</span> 则让容器的标准输入保持打开。
<span class="token parameter variable">-p</span> 指定容器的端口 如-p <span class="token number">8080</span>::8080（主机端口:容器端口）
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 进入</span>
<span class="token comment"># 进入容器后；注意主机名，变成了centos的id</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-t</span> 容器id <span class="token function">bash</span> 
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 退出</span>
<span class="token builtin class-name">exit</span> 
ctrl + d
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 查看容器列表</span>

<span class="token comment"># 查看正在运行的容器</span>
<span class="token function">docker</span> container <span class="token function">ls</span> 

<span class="token comment"># 查看所有的容器，包括已经停止的; 还可以加-q,只显示id</span>
<span class="token function">docker</span> container <span class="token function">ls</span> <span class="token parameter variable">-a</span>

Exited  关闭的
Up      在运行的
</code></pre></div><p><img src="/assets/img/image-20220526142540347.288d4351.png" alt="image-20220526142540347"></p> <p>有很多高级的用法，启动的时候进入、后台运行、输出日志什么的。都太复杂了。</p> <p>！！！我总结出来使用docker的固定步骤！！！目前知道的是redis、nginx可以，mysql需要指定参数，不可以</p> <ul><li>根据一个镜像启动一个容器，但不进入操作</li> <li>进入容器</li> <li>这样退出不会杀死这个容器</li></ul> <p><img src="/assets/img/image-20220526141930834.1b84d38b.png" alt="image-20220526141930834"></p> <h2 id="停止、启动、重启、删除已有容器"><a href="#停止、启动、重启、删除已有容器" class="header-anchor">#</a> <strong>停止、启动、重启、删除已有容器</strong></h2> <div class="language-bash extra-class"><pre class="language-bash"><code> <span class="token comment"># 停止一个容器</span>
 <span class="token function">docker</span> container stop id或名字<span class="token punctuation">(</span>系统给的随机名字<span class="token punctuation">)</span>
 
 <span class="token comment"># 启动已终止的容器 </span>
 <span class="token function">docker</span> container start id或名字<span class="token punctuation">(</span>系统给的随机名字<span class="token punctuation">)</span>
 
 <span class="token comment"># 重启</span>
 <span class="token function">docker</span> container restart id或名字<span class="token punctuation">(</span>系统给的随机名字<span class="token punctuation">)</span>
 
<span class="token comment"># 删除一个处于终止状态的容器（不能删除正在运行的容器）</span>
<span class="token function">docker</span> container <span class="token function">rm</span> id或名字<span class="token punctuation">(</span>系统给的随机名字<span class="token punctuation">)</span>

<span class="token comment"># 删除所有终止状态的容器</span>
<span class="token function">docker</span> container prune 
</code></pre></div><h2 id="其他命令"><a href="#其他命令" class="header-anchor">#</a> 其他命令</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker</span> version  		 <span class="token comment"># 显示docker的基本信息</span>
<span class="token function">docker</span> info      		<span class="token comment"># 系统信息，镜像和容器的数量</span>
<span class="token function">docker</span> 【命令】 <span class="token parameter variable">--help</span>   <span class="token comment"># 帮助信息</span>
<span class="token function">docker</span> stats      		<span class="token comment">#查看所有容器的内存占用</span>
</code></pre></div><p><strong>传输文件到docker容器</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>都是在宿主机执行命令

Docker容器向宿主机传送文件
<span class="token function">docker</span> <span class="token function">cp</span> container_id:<span class="token operator">&lt;</span>docker容器内的路径<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>本地保存文件的路径<span class="token operator">&gt;</span>
<span class="token function">docker</span> <span class="token function">cp</span> 10704c9eb7bb:/root/test.text /home/vagrant/test.txt

宿主机向Docker容器传送文件
<span class="token function">docker</span> <span class="token function">cp</span> 本地文件的路径 container_id:<span class="token operator">&lt;</span>docker容器内的路径<span class="token operator">&gt;</span>
<span class="token function">docker</span> <span class="token function">cp</span>  /home/vagrant/test.txt 10704c9eb7bb:/root/test.text
</code></pre></div><h2 id="部署各种软件-请张嘴"><a href="#部署各种软件-请张嘴" class="header-anchor">#</a> 部署各种软件(请张嘴)</h2> <h3 id="部署nginx"><a href="#部署nginx" class="header-anchor">#</a> 部署Nginx</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@192<span class="token punctuation">]</span><span class="token comment"># docker pull nginx</span>

<span class="token comment"># -p 暴露端口 3344服务器端口 : 80容器内部端口</span>
<span class="token punctuation">[</span>root@192<span class="token punctuation">]</span><span class="token comment"># docker run -d -p:3344:80  nginx </span>
38dbf7bdcaef232

<span class="token comment"># 使用3344可以访问成功</span>
<span class="token punctuation">[</span>root@192<span class="token punctuation">]</span><span class="token comment"># curl localhost:3344</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>
</code></pre></div><p>端口暴露</p> <p><img src="/assets/img/image-20200617212310709.f1f9d43d.png" alt="image-20200617212310709"></p> <p>公网访问浏览器输入 192.168.147.132:3344/</p> <p><img src="/assets/img/image-20220526150858920.38e4709c.png" alt="image-20220526150858920"></p> <p><strong>index.html路径？</strong><br>
/usr/share/ngnix/html</p> <h3 id="安装mysql"><a href="#安装mysql" class="header-anchor">#</a> 安装mysql</h3> <p>docker run -it -p 3306:3306 -e MYSQL_ROOT_PASSWORD=密码 -d mysql:8.0.29</p> <p>不这样启动，则提示需要输入密码才能启动。</p> <p>不需要设置远程登陆访问，我安装上之后，在远端直接就能登陆了。</p> <h3 id="安装rabbitmq"><a href="#安装rabbitmq" class="header-anchor">#</a> 安装rabbitmq</h3> <p>admin:用户</p> <p>xxx:密码</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> run <span class="token parameter variable">-tid</span> <span class="token parameter variable">--hostname</span>   my-rabbit  <span class="token parameter variable">-p</span> <span class="token number">15672</span>:15672 <span class="token parameter variable">-p</span> <span class="token number">5672</span>:5672 <span class="token parameter variable">-e</span> <span class="token assign-left variable">RABBITMQ_DEFAULT_USER</span><span class="token operator">=</span>admin <span class="token parameter variable">-e</span> <span class="token assign-left variable">RABBITMQ_DEFAULT_PASS</span><span class="token operator">=</span>xxx  rabbitmq:3.9.18
</code></pre></div><p>默认是无法访问的</p> <p>进入容器：docker exec -it 1d bash</p> <p>启动起来(说是在启动web页面，但是不进行这一步程序直接连也连不上)：rabbitmq-plugins enable rabbitmq_management</p> <p><strong>新增用户</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 查看用户列表</span>
rabbitmqctl list_users

<span class="token comment"># 添加用户</span>
rabbitmqctl add_user <span class="token punctuation">{</span>用户名<span class="token punctuation">}</span> <span class="token punctuation">{</span>密码<span class="token punctuation">}</span>
<span class="token comment"># 设置用户权限: administrator</span>
rabbitmqctl set_user_tags <span class="token punctuation">{</span>用户名<span class="token punctuation">}</span> <span class="token punctuation">{</span>权限<span class="token punctuation">}</span>

<span class="token comment"># !! 设置完权限还不行, 用户还没有查看/创建队列等权限, 也需设置</span>
</code></pre></div><p>&lt;img src=&quot;././images/image-20231217100453876.png&quot; alt=&quot;image-20231217100453876&quot; style=&quot;zoom:33%;&quot; /&gt;</p> <h3 id="安装redis"><a href="#安装redis" class="header-anchor">#</a> 安装redis</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> <span class="token string">&quot;用户名&quot;</span> <span class="token parameter variable">-p</span> <span class="token number">6379</span>:6379 redis <span class="token parameter variable">--requirepass</span> <span class="token string">&quot;密码&quot;</span>
</code></pre></div><h3 id="安装kibanna"><a href="#安装kibanna" class="header-anchor">#</a> 安装kibanna</h3> <p>安装 es &amp; kibana 也是趟了不少雷, 包括<strong>单节点启动异常、kibana 无法通信 es等</strong></p> <p>docker run --ip http://10.168.20.82:9200 -p 5601:5601 -d kibana:8.6.1</p> <p>进入docker内部，  run kibanna-verxx-code</p> <h3 id="sudo-权限"><a href="#sudo-权限" class="header-anchor">#</a> sudo 权限</h3> <p>想在docker容器中安装vim</p> <ul><li>需要在进入容器时指定为root用户, 在容器中再进行任何操作时都不需要加sudo</li> <li>更新软件源</li> <li>安装vim</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>kibana@c0f41ab4ef00:~/config$ <span class="token function">sudo</span> <span class="token function">apt</span> update
bash: sudo: <span class="token builtin class-name">command</span> not found
kibana@c0f41ab4ef00:~/config$ <span class="token builtin class-name">exit</span>

<span class="token comment"># root用户进入</span>
root@node5:~<span class="token comment"># docker exec -u root -t -i c0 /bin/bash</span>
<span class="token comment"># 再进行任何操作时都不需要加sudo</span>
root@c0f41ab4ef00:/usr/share/kibana<span class="token comment"># sudo apt update</span>
bash: sudo: <span class="token builtin class-name">command</span> not found
root@c0f41ab4ef00:/usr/share/kibana<span class="token comment"># apt update</span>
Get:1 http://security.ubuntu.com/ubuntu focal-security InRelease <span class="token punctuation">[</span><span class="token number">114</span> kB<span class="token punctuation">]</span>
Get:2 http://archive.ubuntu.com/ubuntu focal InRelease <span class="token punctuation">[</span><span class="token number">265</span> kB<span class="token punctuation">]</span>
Get:3 http://security.ubuntu.com/ubuntu focal-security/universe amd64 Packages <span class="token punctuation">[</span><span class="token number">991</span> kB<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.          
<span class="token comment"># 进行安装</span>
root@c0f41ab4ef00:/usr/share/kibana<span class="token comment"># apt install vim</span>
After this operation, <span class="token number">64.7</span> MB of additional disk space will be used.
Do you want to continue? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span> Y

</code></pre></div><h2 id="卸载docker-清空间"><a href="#卸载docker-清空间" class="header-anchor">#</a> 卸载docker/清空间</h2> <p>有个服务器被同事装上了docker一顿操作, 各种镜像/容器都删了, 还占了30G空间<br>
下方命令是我执行的, 没搞崩系统, 请放心使用</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">1</span>.删除docker及安装时自动安装的所有包
<span class="token function">apt-get</span> autoremove <span class="token function">docker</span> docker-ce docker-engine  docker.io  containerd runc

<span class="token number">2</span>.查看docker是否卸载干净
dpkg <span class="token parameter variable">-l</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">docker</span>
 dpkg <span class="token parameter variable">-l</span> <span class="token operator">|</span><span class="token function">grep</span> ^rc<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{print $2}'</span> <span class="token operator">|</span><span class="token function">sudo</span> <span class="token function">xargs</span> dpkg <span class="token parameter variable">-P</span> <span class="token comment"># 删除无用的相关的配置文件</span>

<span class="token number">3</span>.删除没有删除的相关插件
<span class="token function">apt-get</span> autoremove docker-ce-*

<span class="token number">4</span>.删除docker的相关配置<span class="token operator">&amp;</span>目录
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/systemd/system/docker.service.d
<span class="token comment"># 执行完上面的命令只清出来500M空间, 执行下方命令后直接清出来38G. </span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/docker
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5fb9499f.js" defer></script><script src="/assets/js/2.9b59b4ff.js" defer></script><script src="/assets/js/1.96620eb7.js" defer></script><script src="/assets/js/12.431e0208.js" defer></script>
  </body>
</html>
